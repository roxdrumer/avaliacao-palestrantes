<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <title>Avaliação de Palestrantes</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f4f4f4;
    }

    h1 {
      text-align: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #fff;
      margin-bottom: 40px;
    }

    th, td {
      padding: 8px;
      border: 1px solid #ccc;
      text-align: center;
      vertical-align: middle;
    }

    .star {
      cursor: pointer;
      font-size: 20px;
      color: lightgray;
    }

    .star.selected {
      color: goldenrod;
    }

    .low { background-color: #ffcdd2; }
    .medium { background-color: #fff9c4; }
    .high { background-color: #c8e6c9; }

    .top50-container {
      padding: 15px;
      background: #e0ffe0;
      border: 1px solid #a5d6a7;
      border-radius: 10px;
      margin-top: 30px;
    }

    .top50-container h2 {
      margin-top: 0;
    }

    .top50-container ul {
      list-style: none;
      padding-left: 0;
      columns: 2;
    }

    .top50-container li {
      margin: 4px 0;
    }

    .no-opinar {
      display: block;
      margin-top: 4px;
      font-size: 12px;
      background: #eee;
      border: none;
      border-radius: 4px;
      padding: 2px 4px;
      cursor: pointer;
    }

    .no-opinar.active {
      background: #aaa;
      color: white;
    }
  </style>
</head>
<body>
  <h1>Palestrantes <span style="color: black;">Latino</span><span style="color: goldenrod;">ware</span></h1>

  <table id="tabela">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Tema</th>
        <th>Pinotti</th>
        <th>Dellazari</th>
        <th>Querubin</th>
        <th>Nota</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="top50-container">
    <h2>Top 50 Mais Bem Avaliados</h2>
    <ul id="top50-list"></ul>
  </div>

  <script>
    const palestrantes = [
      { nome: "Fabio Souza", tema: "Open Source" },
      { nome: "Evandro Cantú", tema: "Cultura Hacker" },
      { nome: "Alessandro Cunha", tema: "Segurança da Informação" },
      { nome: "Heber Miguel dos Santos", tema: "Privacidade Digital" },
      { nome: "Daniel Nunes de Andrade", tema: "Infraestrutura" },
      { nome: "Magno Teodoro Garay Meza", tema: "Desenvolvimento Web" },
      { nome: "Matheus Bittencourt", tema: "DevOps" },
      { nome: "Daniel Wildt", tema: "Agilidade" },
      { nome: "Paulo Lobo", tema: "Linux" },
      { nome: "Jorge Margutti", tema: "Redes" },
      { nome: "Luis Teixeira", tema: "Automação" },
      { nome: "Lucas Villa Real", tema: "IoT" },
      { nome: "Cristiano dos Santos", tema: "Kubernetes" },
      { nome: "Camila de Oliveira", tema: "Dados Abertos" },
      { nome: "André Luiz Dias", tema: "Educação Tecnológica" },
      { nome: "Eduardo Azevedo", tema: "Hardware Livre" },
      { nome: "Carla Vieira", tema: "IA e Ética" },
      { nome: "Marcos Aurélio", tema: "Java" },
      { nome: "Luciana Costa", tema: "Carreira em TI" },
      { nome: "Bruno Souza", tema: "Comunidades" },
      { nome: "Juliana Rezende", tema: "Python" },
      { nome: "André Rocha", tema: "Blockchain" },
      { nome: "Tiago Oliveira", tema: "Segurança Digital" },
      { nome: "Amanda Ribeiro", tema: "Inclusão Digital" },
      { nome: "Rodrigo Ribeiro", tema: "Open Hardware" },
      { nome: "Ana Paula Almeida", tema: "Sustentabilidade e TI" },
      { nome: "Felipe Nunes", tema: "LibreOffice" },
      { nome: "Fernanda Duarte", tema: "Computação na Nuvem" },
      { nome: "Victor Hugo", tema: "Governança de TI" },
      { nome: "Tatiane Silva", tema: "Mulheres na Tecnologia" },
      { nome: "Claudio Lopes", tema: "Acessibilidade" },
      { nome: "Jéssica Martins", tema: "Tecnologia Social" },
      { nome: "Rafael Campos", tema: "Observabilidade" },
      { nome: "Patrícia Melo", tema: "UX/UI" },
      { nome: "César Augusto", tema: "Sistemas Embarcados" },
      { nome: "Vanessa Costa", tema: "Open Science" },
      { nome: "Gustavo Lima", tema: "Computação Quântica" },
      { nome: "Márcio Silva", tema: "Documentação Técnica" },
      { nome: "Aline Ferreira", tema: "Big Data" },
      { nome: "Diego Rocha", tema: "DevRel" },
      { nome: "Sérgio Tavares", tema: "Raspberry Pi" },
      { nome: "Camila Fernandes", tema: "Educação Aberta" },
      { nome: "Eduardo Martins", tema: "Licenças Livres" },
      { nome: "Simone Braga", tema: "Empreendedorismo" },
      { nome: "Ivan Costa", tema: "IA Aplicada" },
      { nome: "Raquel Souza", tema: "Tecnologia e Sociedade" },
      { nome: "Fernando Alves", tema: "Geotecnologias" },
      { nome: "Helena Ramos", tema: "Open Data" },
      { nome: "Leandro Santos", tema: "Containers" },
      { nome: "Tatiana Rocha", tema: "Governança Aberta" }
    ];

    const contatos = {
      "Fabio Souza": "fabio.souza@embarcados.com.br",
      "Evandro Cantú": "evandro.cantu@ifpr.edu.br",
      "Alessandro Cunha": "alessandro.cunha@avnet.com",
      "Heber Miguel dos Santos": "heber.eng.eletronica@gmail.com",
      "Daniel Nunes de Andrade": "danielnunes@inatel.br",
      "Magno Teodoro Garay Meza": "https://www.linkedin.com/in/magnogaray/",
      "Luiz Leão": "luiz.leao2002@hotmail.com",
      "Maddox": "maddox.br@gmail.com",
      "Adriano Santos": "adriano.santos@itaipuparquetec.org.br / alan.lee@itaipuparquetec.org.br",
      "R Coelho": "rcoelho@mpma.mp.br",
      "Fernando Schutz": "fschutz@gmail.com",
      "Estevan Brandt": "estevanbrandt@gmail.com",
      "Fernando Mori": "fsmmori@gmail.com",
      "Drenoel": "drenoel@gmail.com",
      "Linux Rafa": "linux.rafa@gmail.com",
      "Galvão": "galvao@galvao.eti.br",
      "Gabriel Rabelo": "rabelogabriel72@gmail.com",
      "Marcos Savant": "marcos@savant.com.br",
      "Wagner Mattei": "wagner.mattei@gmail.com",
      "Gustavo Pantuza": "gustavopantuza@gmail.com",
      "Camila DevOps": "camidevops@gmail.com",
      "Felipe Guimarães": "felipe.guimaraes@itaipuparquetec.org.br",
      "João Bueno": "jsobueno@gmail.com",
      "FM Web Developer": "fm.webdeveloper@gmail.com",
      "Linux Men": "linuxmen@papodesysadmin.org",
      "Nilson dos Santos": "nilson.dossantos@inss.gov.br - +55 61 8121-3184",
      "Renata Zimm": "renazimm@gmail.com",
      "Reinaldo": "reinaldo@energyreview.com.br",
      "Guido B.": "guidob@itaipu.gov.py",
      "Debora Denise": "deboradenisedias@hotmail.com",
      "Alcides Augusto": "alcides@emater.pr.gov.br",
      "Tânia Lopes": "tania.lopes@pmc.pr.gov.br",
      "Sueli Ueda": "sueli.ueda@itaipu.gov.br",
      "Alvaro Hecht": "alvaro.hecht@itaipu.gov.br",
      "Bruno Rossi": "bruno.rossi@itaipu.gov.br",
      "Marcos Augusto": "marcos.augusto@itaipu.gov.br",
      "Renan Menegucci": "renan.menegucci@itaipu.gov.br",
      "Lucas Santos": "lucas.santos@itaipu.gov.br"
    };

    const avaliadores = ["Pinotti", "Dellazari", "Querubin"];

    // Notas armazenadas: notas[nome][avaliador] = número 1-5 ou null
    const notas = {};

    // Função para renderizar estrelas
    function renderStars(nome, avaliador) {
      const notaAtual = notas[nome] ? notas[nome][avaliador] : null;
      let starsHtml = "";
      for (let i = 1; i <= 5; i++) {
        const selectedClass = notaAtual === i ? "selected" : "";
        starsHtml += `<span class="star ${selectedClass}" data-nome="${nome}" data-avaliador="${avaliador}" data-valor="${i}">&#9733;</span>`;
      }
      return starsHtml;
    }

    // Função principal para renderizar a tabela
    function render() {
      const tbody = document.querySelector("tbody");
      tbody.innerHTML = "";

      palestrantes.forEach(p => {
        const nome = p.nome;
        const tema = p.tema;
        const contato = contatos[nome] || "";

        if (!notas[nome]) {
          notas[nome] = {};
          avaliadores.forEach(a => notas[nome][a] = null);
        }

        const notasValidas = avaliadores
          .map(a => notas[nome][a])
          .filter(n => n !== null);
        const media = notasValidas.length > 0
          ? (notasValidas.reduce((a, b) => a + b, 0) / notasValidas.length).toFixed(2)
          : "—";

        const tr = document.createElement("tr");
        let classe = "";
        if (media !== "—") {
          const m = parseFloat(media);
          if (m < 2.5) classe = "low";
          else if (m < 3.5) classe = "medium";
          else classe = "high";
        }
        tr.className = classe;

        tr.innerHTML = `
          <td title="${contato}">${nome}</td>
          <td>${tema}</td>
          ${avaliadores.map(av => `
            <td>
              ${renderStars(nome, av)}
              <button class="no-opinar ${notas[nome][av] === null ? "active" : ""}" data-nome="${nome}" data-avaliador="${av}">Não opinar</button>
            </td>
          `).join("")}
          <td>${media}</td>
        `;

        tbody.appendChild(tr);
      });

      renderTop50();
      attachEvents();
    }

    // Função para renderizar a lista Top 50
    function renderTop50() {
      const top50List = document.getElementById("top50-list");

      // Ordenar palestrantes pela média decrescente
      const palestrantesComMedia = palestrantes.map(p => {
        const notasValidas = avaliadores
          .map(a => notas[p.nome][a])
          .filter(n => n !== null);
        const media = notasValidas.length > 0
          ? (notasValidas.reduce((a, b) => a + b, 0) / notasValidas.length)
          : 0;
        return { nome: p.nome, media };
      });

      palestrantesComMedia.sort((a, b) => b.media - a.media);

      // Pega os top 50 (ou todos se menos de 50)
      const top50 = palestrantesComMedia.slice(0, 50);

      top50List.innerHTML = top50
        .map(p => `<li>${p.nome} - Média: ${p.media.toFixed(2)}</li>`)
        .join("");
    }

    // Função para tratar eventos dos cliques nas estrelas e botões "Não opinar"
    function attachEvents() {
      document.querySelectorAll(".star").forEach(star => {
        star.onclick = () => {
          const nome = star.getAttribute("data-nome");
          const avaliador = star.getAttribute("data-avaliador");
          const valor = parseInt(star.getAttribute("data-valor"));

          notas[nome][avaliador] = valor;
          render();
        };
      });

      document.querySelectorAll(".no-opinar").forEach(button => {
        button.onclick = () => {
          const nome = button.getAttribute("data-nome");
          const avaliador = button.getAttribute("data-avaliador");

          notas[nome][avaliador] = null;
          render();
        };
      });
    }

    // Inicializa a tabela na carga da página
    render();
  </script>
</body>
</html>
